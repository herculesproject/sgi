<section class="proyecto-ficha-general">
  <h2>{{'csp.proyecto.ficha.general.crear.titulo' | translate}}</h2>

  <form [formGroup]="formGroup">

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">
      <!-- Estado actual nuevo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.estado' | translate}}</mat-label>
          <mat-select formControlName="estado" disabled
            placeholder="{{'csp.solicitud.cambio-estado.actual' | translate}}">
            <mat-option *ngFor="let estado of ESTADO_MAP | keyvalue" [value]="estado.key">
              {{ estado.value | translate}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order" *ngIf="formPart.comentarioEstadoCancelado">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.comentario' | translate}}</mat-label>
          <textarea matInput formControlName="comentario" id="comentario"
            placeholder="{{'csp.proyecto.ficha.general.comentario' | translate}}"></textarea>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Titulo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.titulo' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.titulo' | translate}}" matInput
            formControlName="titulo" required>
          <mat-error *ngIf="formGroup.controls.titulo.errors?.required">
            {{'csp.proyecto.ficha.general.titulo.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.titulo.errors?.maxlength">
            {{'csp.proyecto.ficha.general.titulo.maxlength' | translate}}
          </mat-error>
        </mat-form-field>

      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- acronimo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.acronimo' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.acronimo' | translate}}" matInput
            formControlName="acronimo">
          <mat-error *ngIf="formGroup.controls.acronimo.errors?.maxlength">
            {{'csp.proyecto.ficha.general.acronimo.maxlength' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Cod identificacion externo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.codExterno' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.codExterno' | translate}}" matInput
            formControlName="codigoExterno">
          <mat-error *ngIf="formGroup.controls.codigoExterno.errors?.maxlength">
            {{'csp.proyecto.ficha.general.codigoExterno.maxlength' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Fecha inicio -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field color="primary">
          <mat-label>{{'csp.proyecto.ficha.general.fecha.inicio'| translate}}</mat-label>
          <input matInput [ngxMatDatetimePicker]="pickerFechaInicio" formControlName="fechaInicio" required>
          <mat-datepicker-toggle class="fechaIcon" matSuffix [for]="pickerFechaInicio"></mat-datepicker-toggle>
          <ngx-mat-datetime-picker #pickerFechaInicio showSeconds="true" [defaultTime]="[0,0,0]">
          </ngx-mat-datetime-picker>
          <mat-error *ngIf="formGroup.controls.fechaInicio.errors?.required">
            {{'csp.proyecto.ficha.general.fecha.inicio.error.requerido' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.fechaInicio.errors?.range">
            {{'csp.proyecto.ficha-general.fecha-inicio.error.range' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Fecha fin -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field color="primary">
          <mat-label>{{'csp.proyecto.ficha.general.fecha.fin'| translate}}</mat-label>
          <input matInput [ngxMatDatetimePicker]="pickerFechaFin" formControlName="fechaFin" required>
          <mat-datepicker-toggle class="fechaIcon" matSuffix [for]="pickerFechaFin"></mat-datepicker-toggle>
          <ngx-mat-datetime-picker #pickerFechaFin showSeconds="true" [defaultTime]="[23,59,59]">
          </ngx-mat-datetime-picker>
          <mat-error *ngIf="formGroup.controls.fechaFin.errors?.required">
            {{'csp.proyecto.ficha.general.fecha.fin.error.requerido' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.fechaFin.errors?.after">
            {{'csp.proyecto.ficha.general.fechaFin.after' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.fechaFin.errors?.range">
            {{'csp.proyecto.ficha-general.fecha-fin.error.range' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Convocatoria -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field fxFill>
          <mat-label>{{'csp.proyecto.ficha.general.convocatoria' | translate}}</mat-label>
          <sgi-select-convocatoria placeholder="{{'csp.proyecto.ficha.general.convocatoria' | translate}}"
            formControlName="convocatoria">
          </sgi-select-convocatoria>
        </mat-form-field>
      </div>

      <!-- Referencia externa -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.externa.convocatoria' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.externa.convocatoria' | translate}}" matInput
            formControlName="convocatoriaExterna">
          <mat-error *ngIf="formGroup.controls.convocatoriaExterna.errors?.maxlength">
            {{'csp.proyecto.ficha.general.convocatoriaExterna.maxlength' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">
      <!-- Solicitud -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order" *ngIf="formPart.mostrarSolicitud">
        <mat-form-field class="input-form">
          <mat-label>{{'csp.proyecto.ficha.general.solicitud' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.solicitud' | translate}}" matInput
            formControlName="solicitudProyecto">
        </mat-form-field>
      </div>
    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Unidad de gestion -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.unidad.gestion' | translate}}</mat-label>
          <input matInput formControlName="unidadGestion" type="text" id="unidadGestion"
            placeholder="{{'csp.proyecto.ficha.general.unidad.gestion' | translate}}"
            [matAutocomplete]="autoUnidadGestion" (ngModelChange)="loadModelosEjecucion()"
            (keyup)="clearModeloEjecuccion()" required>
          <mat-autocomplete #autoUnidadGestion="matAutocomplete" [displayWith]="getUnidadGestion">
            <mat-option *ngFor="let unidadGestion of unidadesGestion$ | async" [value]="unidadGestion"
              (click)="clearModeloEjecuccion()">
              {{unidadGestion.nombre}}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="formGroup.controls.unidadGestion.errors?.required">
            {{'csp.proyecto.ficha.general.unidad.gestion.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.unidadGestion.errors?.invalid">
            {{'csp.proyecto.ficha.general.unidad.gestion.error.invalid' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Modelo de ejecución -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.modelo.ejecucion' | translate}}</mat-label>
          <input type="text" placeholder="{{'csp.proyecto.ficha.general.modelo.ejecucion' | translate}}" matInput
            formControlName="modeloEjecucion" [matAutocomplete]="autoModeloEjecucion"
            (ngModelChange)="loadFinalidades()" (click)="loadModelosEjecucion()" required>
          <mat-autocomplete #autoModeloEjecucion="matAutocomplete" [displayWith]="getModeloEjecucion">
            <mat-option *ngFor="let modeloEjecucion of modelosEjecucion$ | async" [value]="modeloEjecucion">
              {{modeloEjecucion.nombre}}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="formGroup.controls.modeloEjecucion.errors?.required">
            {{'csp.proyecto.ficha.general.modelo.ejecucion.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.modeloEjecucion.errors?.invalid">
            {{'csp.proyecto.ficha.general.modelo.ejecucion.error.invalid' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Finalidades -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.finalidad' | translate}}</mat-label>
          <input matInput formControlName="finalidad" type="text" id="finalidad"
            placeholder="{{'csp.proyecto.ficha.general.finalidad' | translate}}" [matAutocomplete]="autoFinalidad"
            [required]="formPart.abiertoRequired">
          <mat-autocomplete #autoFinalidad="matAutocomplete" [displayWith]="getFinalidad">
            <mat-option *ngFor="let finalidad of finalidades$ | async" [value]="finalidad">
              {{finalidad.nombre}}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="formGroup.controls.finalidad.errors?.required">
            {{'csp.proyecto.ficha.general.finalidad.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.finalidad.errors?.invalid">
            {{'csp.proyecto.ficha.general.finalidad.error.invalid' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Tipo de ámbito geográfico -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.tipo.ambito.geografico' | translate}}</mat-label>
          <input matInput formControlName="ambitoGeografico" type="text" id="ambitoGeografico"
            placeholder="{{'csp.proyecto.ficha.general.tipo.ambito.geografico' | translate}}"
            [matAutocomplete]="autoTipoAmbitoGeografico" [required]="formPart.abiertoRequired">
          <mat-autocomplete #autoTipoAmbitoGeografico="matAutocomplete" [displayWith]="getTipoAmbitoGeografico">
            <mat-option *ngFor="let tipoAmbitoGeografico of tipoAmbitosGeograficos$ | async"
              [value]="tipoAmbitoGeografico">
              {{tipoAmbitoGeografico.nombre}}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="formGroup.controls.ambitoGeografico.errors?.required">
            {{'csp.proyecto.ficha.general.tipo.ambito.geografico.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.ambitoGeografico.errors?.vacio">
            {{'csp.proyecto.ficha.general.tipo.ambito.geografico.error.vacio' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.ambitoGeografico.errors?.invalid">
            {{'csp.proyecto.ficha.general.ambito.geografico.error.invalid' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Confidencial -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.confidencial' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="confidencial" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.confidencial.errors?.required">
            {{'csp.proyecto.ficha.general.confidencial.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Clasificacion produccion cientifica -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.cvn' | translate}}</mat-label>
          <mat-select formControlName="clasificacionCVN" placeholder="{{'csp.proyecto.ficha.general.cvn' | translate}}">
            <mat-option [value]="null"></mat-option>
            <mat-option *ngFor="let clasificacionCVN of CLASIFICACION_CVN_MAP | keyvalue"
              [value]="clasificacionCVN.key">
              {{ clasificacionCVN.value | translate}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Proyecto colaborativo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.colaborativo' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="colaborativo" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.colaborativo.errors?.required">
            {{'csp.proyecto.ficha.general.colaborativo.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Coordinador externo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.coorExterno' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="coordinadorExterno" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.coordinadorExterno.errors?.required">
            {{'csp.proyecto.ficha.general.coordinadorExterno.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Universidad subcontratada -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.subcontratada' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="uniSubcontratada">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Requiere timesheet -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.timesheet' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="timesheet" [required]="validacionTimesheet()">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.timesheet.errors?.required">
            {{'csp.proyecto.ficha.general.timesheet.error.required' | translate}}
          </mat-error>
          <mat-error *ngIf="formGroup.controls.timesheet.errors?.invalid">
            {{'csp.proyecto.ficha.general.timesheet.error.invalid' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Paquete de trabajo -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.paquete.trabajo' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="paquetesTrabajo" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.paquetesTrabajo.errors?.required">
            {{'csp.proyecto.ficha.general.paquete.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>


    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Calculo coste -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.calculo' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="costeHora" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.costeHora.errors?.required">
            {{'csp.proyecto.ficha.general.coste.hora.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Criterio horas anuales -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order" *ngIf="requiredHoras">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.horas.anuales' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="tipoHorasAnuales" [required]="requiredHoras">
            <mat-option *ngFor="let tipoHorasAnuales of TIPO_HORAS_ANUALES_MAP | keyvalue"
              [value]="tipoHorasAnuales.key">
              {{ tipoHorasAnuales.value | translate}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.tipoHorasAnuales.errors?.required">
            {{'csp.proyecto.ficha.general.coste.horas.anuales.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Contratacion rrhh -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.contratacion' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="contratacion" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.contratacion.errors?.required">
            {{'csp.proyecto.ficha.general.contratacion.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Requiere facturacion -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.facturacion' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="facturacion" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.facturacion.errors?.required">
            {{'csp.proyecto.ficha.general.facturacion.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Aplicacion IVA -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field>
          <mat-label>{{'csp.proyecto.ficha.general.iva' | translate}}</mat-label>
          <mat-select matNativeControl formControlName="iva" [required]="formPart.abiertoRequired">
            <mat-option [value]="true">{{'label.si' | translate}}</mat-option>
            <mat-option [value]="false">{{'label.no' | translate}}</mat-option>
          </mat-select>
          <mat-error *ngIf="formGroup.controls.iva.errors?.required">
            {{'csp.proyecto.ficha.general.iva.error.required' | translate}}
          </mat-error>
        </mat-form-field>
      </div>

    </div>

    <div [fxLayout.xs]="fxLayoutProperties.xs" [fxLayout]="fxLayoutProperties.layout"
      [fxLayoutGap]="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <!-- Observaciones -->
      <div [fxFlex.sm]="fxFlexProperties.sm" [fxFlex.md]="fxFlexProperties.md" [fxFlex.gt-md]="fxFlexProperties.gtMd"
        [fxFlexOrder]="fxFlexProperties.order">
        <mat-form-field fxFill>
          <mat-label>{{'csp.proyecto.ficha.general.observaciones' | translate}}</mat-label>
          <textarea matInput formControlName="observaciones" id="observaciones"
            placeholder="{{'csp.proyecto.ficha.general.observaciones' | translate}}"></textarea>
        </mat-form-field>
      </div>

    </div>



  </form>

</section>