<!-- Evaluadores listado -->
<div class="scrollable-panel-with-footer">
  <section class="evaluador-listado">

    <!-- Buscador de comités -->

    <form class="formulario mat-elevation-z8" [formGroup]="formGroup" [fxLayout.xs]="fxLayoutProperties.xs"
      [fxLayout]="fxLayoutProperties.layout" fxLayoutGap="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">

      <div fxFlex="85%" fxFlex.sm="50%" fxFlex.md="73%" [fxLayout.xs]="fxLayoutProperties.xs"
        [fxLayout]="fxLayoutProperties.layout" fxLayoutGap="fxLayoutProperties.gap" ngClass.gt-xs="ml-10">
        <!--Persona-->
        <div class="separacion">
          <div class="col">
            <sgi-buscar-persona [textoLabel]="textoUsuarioLabel" [textoInput]="textoUsuarioInput"
              [textoButton]="textoUsuarioButton" (usuarioSeleccionado)="setUsuario($event)"></sgi-buscar-persona>
          </div>
        </div>

        <!-- Comité -->
        <div class="col">
          <mat-form-field class="input-form">
            <mat-label>{{'eti.evaluador.buscador.comite.titulo' | translate}}</mat-label>
            <input type="text" [placeholder]="'eti.evaluador.buscador.comite.titulo' | translate" arial-label="Number"
              matInput formControlName="comite" [matAutocomplete]="autocompleteComite">
            <mat-autocomplete #autocompleteComite="matAutocomplete" [displayWith]="getComite">
              <mat-option *ngFor="let comite of filteredComites | async" [value]="comite">
                {{comite.comite}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <!-- Estado -->
        <div class="col checkbox">
          <mat-checkbox color="primary" formControlName="estado" type="text" id="estado">
            {{'eti.evaluador.listado.estado.activo' | translate}}</mat-checkbox>
        </div>
      </div>

      <div class="buttons-final">
        <div class="col filter-button">
          <button color="primary" aria-label="Center Align" mat-raised-button (click)="onSearch()">
            <mat-icon>search</mat-icon> {{'botones.buscar'| translate}}
          </button>
          <button color="warn" aria-label="Center Align" (click)="onClearFilters()"
            mat-button>{{'botones.limpiar'| translate}}
          </button>
        </div>
      </div>

    </form>

    <table class="mat-elevation-z8 table-evaluador" mat-table [dataSource]="evaluadores$ | async" matSort
      matSortActive="id" matSortDirection="asc" matSortDisableClear>

      <!-- Nombre y apellidos persona -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef> {{'eti.evaluador.listado.nombreApellidos' | translate}}
        </th>
        <td mat-cell *matCellDef="let evaluador">
          {{evaluador.nombre}} {{evaluador.primerApellido}} {{evaluador.segundoApellido}} </td>
      </ng-container>

      <ng-container matColumnDef="identificadorNumero">
        <th mat-header-cell *matHeaderCellDef>
          {{'eti.evaluador.listado.numeroDocumento' | translate}}
        </th>
        <td mat-cell *matCellDef="let evaluador"> {{evaluador.identificadorNumero}}{{evaluador.identificadorLetra}}</td>
      </ng-container>

      <!-- Comite Column -->
      <ng-container matColumnDef="comite">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'eti.evaluador.listado.comite' | translate}} </th>
        <td mat-cell *matCellDef="let evaluador"> {{evaluador.comite.comite}} </td>
      </ng-container>

      <!-- Cargo comite Column -->
      <ng-container matColumnDef="cargoComite">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'eti.evaluador.listado.cargoComite' | translate}} </th>
        <td mat-cell *matCellDef="let evaluador"> {{evaluador.cargoComite?.nombre}} </td>
      </ng-container>

      <!-- Fecha alta Column -->
      <ng-container matColumnDef="fechaAlta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'eti.evaluador.listado.fechaAlta' | translate}} </th>
        <td mat-cell *matCellDef="let evaluador"> {{evaluador.fechaAlta}} </td>
      </ng-container>

      <!-- Fecha baja Column -->
      <ng-container matColumnDef="fechaBaja">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'eti.evaluador.listado.fechaBaja' | translate}} </th>
        <td mat-cell *matCellDef="let evaluador"> {{evaluador.fechaBaja}} </td>
      </ng-container>

      <!-- Estado activo/inactivo Column -->
      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef> {{'eti.evaluador.listado.estado.titulo' | translate}}
        </th>
        <td mat-cell *matCellDef="let evaluador">
          {{evaluador.activo === true ? ('eti.evaluador.listado.estado.activo' | translate) : ('eti.evaluador.listado.estado.inactivo' | translate)}}
        </td>
      </ng-container>

      <!-- Acciones Column -->
      <ng-container matColumnDef="acciones" class="acciones">
        <th mat-header-cell *matHeaderCellDef> {{'eti.evaluador.listado.acciones' | translate}} </th>
        <td mat-cell *matCellDef="let evaluador;let i=index;">
          <ng-container *sgiHasAuthorityForAnyUO="'ETI-EVR-E'">
            <button mat-button [routerLink]="[evaluador.id]"
              matTooltip="{{'eti.evaluador.listado.editar' | translate}}">
              <mat-icon color="primary">border_color</mat-icon>
            </button>
            <button mat-button *sgiHasAuthorityForAnyUO="'ETI-EVR-B'"
              matTooltip="{{'eti.evaluador.listado.borrar' | translate}}" (click)="borrar(evaluador.id, $event)">
              <mat-icon color="warn">highlight_off</mat-icon>
            </button>
          </ng-container>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="elementosPagina" [length]="totalElementos" showFirstLastButtons>
    </mat-paginator>
  </section>
</div>
<sgi-footer-crear *sgiHasAuthorityForAnyUO="'ETI-EVR-C'" [texto]="textoCrear" [route]="ROUTE_NAMES.NEW">
</sgi-footer-crear>
<!-- FIN evaluadores listado-->