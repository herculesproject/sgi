<?xml version="1.0" encoding="UTF-8"?>
<api context="/sgp" name="API-SGDOC" version="1.0.0" version-type="context" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="POST GET" url-mapping="/documentos">
        <inSequence>
            <!--This is generated API skeleton.-->
            <!--Business Logic Goes Here-->
            <payloadFactory media-type="json">
                <format>[
    {
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    },
    {
        "documentoRef": "doc-002",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }
]</format>
                <args/>
            </payloadFactory>
            <send>
                <endpoint key="sgdoc-service"/>
            </send>
        </inSequence>
        <outSequence>
            <respond/>
        </outSequence>
        <faultSequence>
            <switch source="get-property('ERROR_CODE')">
                <case regex="101503|101504">
                    <payloadFactory media-type="json">
                        <format>[
    {
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    },
    {
        "documentoRef": "doc-002",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }
]</format>
                        <args/>
                    </payloadFactory>
                </case>
                <default/>
            </switch>
            <respond/>
        </faultSequence>
    </resource>
    <resource methods="GET" uri-template="/documentos/bydocumentorefs/{documentoRefs}">
        <inSequence>
            <!--This is generated API skeleton.-->
            <property expression="get-property('uri.var.documentoRefs')" name="documentoRefs" scope="default" type="STRING"/>
            <!--Business Logic Goes Here-->
            <payloadFactory media-type="json">
                <format>[
    {
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    },
    {
        "documentoRef": "doc-002",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }
]</format>
                <args/>
            </payloadFactory>
            <send>
                <endpoint key="sgp-service"/>
            </send>
        </inSequence>
        <outSequence>
            <respond/>
        </outSequence>
        <faultSequence>
            <switch source="get-property('ERROR_CODE')">
                <case regex="101503|101504">
                    <payloadFactory media-type="json">
                        <format>[
    {
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    },
    {
        "documentoRef": "doc-002",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }
]</format>
                        <args/>
                    </payloadFactory>
                </case>
                <default/>
            </switch>
            <respond/>
        </faultSequence>
    </resource>
    <resource methods="PUT GET" uri-template="/documentos/{documentoRef}">
        <inSequence>
            <!--This is generated API skeleton.-->
            <property expression="get-property('uri.var.documentoRef')" name="documentoRef" scope="default" type="STRING"/>
            <!--Business Logic Goes Here-->
            <payloadFactory media-type="json">
                <format>{
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }</format>
                <args/>
            </payloadFactory>
            <send>
                <endpoint key="sgp-service"/>
            </send>
        </inSequence>
        <outSequence>
            <respond/>
        </outSequence>
        <faultSequence>
            <switch source="get-property('ERROR_CODE')">
                <case regex="101503|101504">
                    <payloadFactory media-type="json">
                        <format>{
        "documentoRef": "doc-001",
        "nombre": "2000-01-01",
        "version": "1",
        "fechaCreacion": "2000-01-01",
        "tipo": "application/pdf",
        "autorRef":"user-001"
    }</format>
                        <args/>
                    </payloadFactory>
                </case>
                <default/>
            </switch>
            <respond/>
        </faultSequence>
    </resource>
    <resource methods="DELETE" uri-template="/documentos/{documentoRef}">
        <inSequence>
            <!--This is generated API skeleton.-->
            <property expression="get-property('uri.var.documentoRef')" name="documentoRef" scope="default" type="STRING"/>
            <!--Business Logic Goes Here-->
            <send>
                <endpoint key="sgp-service"/>
            </send>
        </inSequence>
        <outSequence>
            <respond/>
        </outSequence>
        <faultSequence>
            <respond/>
        </faultSequence>
    </resource>
</api>
